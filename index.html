<!DOCTYPE html>
<html>
<head>

  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script src="https://kit.fontawesome.com/19e5932cd5.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" type="text/css" href="css/design.css">

</head>
<body>

<section>
  <h1>auto graph</h1>

  <div id="letters">
    <div id="a"></div>
    <div id="b"></div>
    <div id="c"></div>
    <div id="d"></div>
    <div id="e"></div>
    <div id="f"></div>
    <div id="g"></div>
    <div id="h"></div>
    <div id="i"></div>
    <div id="j"></div>
    <div id="k"></div>
    <div id="l"></div>
    <div id="m"></div>
    <div id="n"></div>
    <div id="o"></div>
    <div id="p"></div>
    <div id="q"></div>
    <div id="r"></div>
    <div id="s"></div>
    <div id="t"></div>
    <div id="u"></div>
    <div id="v"></div>
    <div id="w"></div>
    <div id="x"></div>
    <div id="y"></div>
    <div id="z"></div>
  </div>

  <div id="inputs">
    <input type="text" id="myIntention" placeholder="Type your name...">
    <button id="submitBtn" onclick="makeSigil()"><i class="fas fa-arrow-right"></i></button>
  </div>
  <!-- <p id="kitten"></p> -->
</section>

<footer>
  &copy; merethom 2020
</footer>





</body>
<script>

//This array stores all the letters of the alphabet
let alphabet = [
  "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"
]

function convertInput(ogInput) {
  //1. We only need letters, so we will remove any numbers
  let removeNums = ogInput.replace(/[0-9]/g, '');
  //2. Remove anything symbols that may have been added
  let removeSymbols = removeNums.replace(/[^\w\s]/gi, '');
  //3. Also gotta remove dat whitespace
  let removeSpace = removeSymbols.replace(/\s/g, '');
  //4. Then we convert to lower case because UC and LC are different characters
  let removeCaps = removeSpace.toLowerCase();
  //5. We remove duplicate characters from the input function using this handy function from Chris West from https://cwestblog.com
  function uniqChars(str) {
    return str.replace(/[\s\S](?=([\s\S]+))/g, function(c, s) {
      return s.indexOf(c) + 1 ? '' : c;
    });
  }
  let removeDuplicates = uniqChars(removeCaps);
  //6. We remove all the whitespace
  let phraseTrimmed = removeDuplicates.replace(/\s/g, '');;
  return phraseTrimmed;
}



function makeSigil(){

  //1. Reset all letters and make opacity 0
  for (i = 0; i < alphabet.length; i++) {
    document.getElementById(alphabet[i]).style.opacity = "0";
  }
  //2. Take the desired sigil value input by the user
  let intention = document.getElementById("myIntention").value;
  //3. Convert it so all unnecessary text/chars/white space is removed
  let trimmedIntention = convertInput(intention);
  //4. Put trimmed input into an array
  let putIntoArray = Array.from(trimmedIntention);
  //5. Change the opacity of the background image when the string is present
  putIntoArray.forEach((item, i) => {
    let position = alphabet.indexOf(item);
    document.getElementById(alphabet[position]).style.opacity = "1";
    //console.log(alphabet[position]);
    //console.log(putIntoArray[i]);
  })
  //console.log(intention);
  // document.getElementById("kitten").innerHTML = intention;

} //End function

//Takes input and executes makeSigil() function on keypress/click
let input = document.getElementById("myIntention");
input.addEventListener("keyup", function(event) {
  if (event.keyCode === 13) {
   event.preventDefault();
   document.getElementById("submitBtn").click();
  }
});

</script>
</html>
